services:
  fabric-server:
    image: kayvan/fabric
    container_name: fabric-server
    volumes:
      - "${HOME}/.fabric-config:/root/.config/fabric"
    command: --serve --address 0.0.0.0:8080

  fabric-mcp:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: fabric-mcp
    environment:
      - FABRIC_BASE_URL=http://fabric-server:8080
    ports:
      - "8000:8000"
    command: --transport http --host 0.0.0.0 --port 8000
    depends_on:
      - fabric-server
